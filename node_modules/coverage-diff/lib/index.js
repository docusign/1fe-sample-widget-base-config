"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.diff = exports.defaultOptions = void 0;
const diffChecker_1 = require("./diffChecker");
const resultFormatter_1 = require("./resultFormatter");
exports.defaultOptions = {
    checkCriteria: ['lines', 'branches', 'functions', 'statements'],
    coverageThreshold: 100,
    coverageDecreaseThreshold: 0
};
function diff(base, head, options = exports.defaultOptions) {
    const { checkCriteria, coverageThreshold, coverageDecreaseThreshold, newFileCoverageThreshold, customFormatter } = options;
    const { regression, files, totals, diff, belowThreshold } = (0, diffChecker_1.diffChecker)(base, head, checkCriteria, coverageThreshold, coverageDecreaseThreshold, newFileCoverageThreshold);
    const results = customFormatter?.(files, totals) || (0, resultFormatter_1.resultFormatter)(files, totals);
    return {
        diff,
        results,
        regression,
        belowThreshold
    };
}
exports.diff = diff;
exports.default = diff;
