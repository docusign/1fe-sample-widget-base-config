"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.keyboardImplementation = keyboardImplementation;
var _events = require("../../events");
var _utils = require("../utils");
var _getNextKeyDef = require("./getNextKeyDef");
async function keyboardImplementation(instance, text, options) {
  const {
    keyDef,
    consumedLength
  } = (0, _getNextKeyDef.getNextKeyDef)(text, options);
  keypress(keyDef, instance);
  if (text.length > consumedLength) {
    if (options.delay > 0) {
      await (0, _utils.wait)(options.delay);
    }
    return keyboardImplementation(instance, text.slice(consumedLength), options);
  }
  return void undefined;
}
function keypress(keyDef, instance) {
  _events.fireEvent.write(instance, {
    value: keyDef.hex
  });
}